<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GRAPH</title>
  <link rel="stylesheet" href="app.css">
  <script type="module" src="app.js"></script>
</head>

<body hidden>
  <header id="headus">
    <datalist id="names"></datalist>

    <div class="group">
      <button id="add-node">Add Node</button>
      <input type="search" id="query" list="names" placeholder="Find or create a node...">
    </div>

    <div class="group">
      <h1>GRAPH</h1>
      <img src="logo.svg" alt="graph app logo with letter nodes and arrows connecting them">
      <button id="open-menu">Menu</button>
    </div>
  </header>

  <main>
    <section id="nodus">
      <form>
        <input type="radio" name="nodes" value="current">
        <input type="radio" name="nodes" value="many">
        <input type="radio" name="nodes" value="none">
  
        <article id="current-node" class="view">
          <header>
            <button class="edit-node-button">Edit Node</button>
            <button class="delete-node-button">Delete Node</button>
            <button class="add-link-button">Add Link</button>
          </header>
          <h2 data-name></h2>
          <p data-description></p>
          <div class="linked-nodes-list-container">
            <input type="checkbox" id="linked-nodes-toggle" class="view-toggle">
            <label for="linked-nodes-toggle" hidden></label>
            <p class="no-links-message">No links to other nodes yet.</p>
            <ul class="linked-nodes-list">
              <!-- Radio buttons will be inserted here by nodus.js -->
            </ul>
          </div>
          <!-- Content for a single "current" node -->
          <template id="linked-node-item-template">
            <li>
              <label>
                <input type="radio" name="nodus-linked-node-select" class="view-toggle">
                <span class="linked-node-item" data-id data-direction></span>
              </label>
            </li>
          </template>
        </article>
  
        <article id="nodus-many" class="view">
          <template id="node-card-template">
            <div class="node-card">
              <div class="node-card-main">
                <h3 data-name></h3>
                <p data-description></p>
              </div>
              <div class="node-card-aside">
                <button class="goto-node-button" data-id>Go to Node</button>
                <div class="link-counts">
                  <span class="incoming" title="Incoming Links" data-incoming></span>
                  <span class="outgoing" title="Outgoing Links" data-outgoing></span>
                </div>
              </div>
            </div>
          </template>
          <!-- Content for a list of many nodes -->
        </article>
  
        <article id="nodus-message" class="view">
          <p>No nodes in the graph. Add some using the 'Add Node' button in the top left corner.</p>
        </article>
      </form>
    </section>

    <div id="splitter"></div>

    <section id="linkus-section">
      <!-- Controls for which aside view to show -->
      <input type="radio" name="linkus-view" id="linkus-view-related" class="view-toggle">
      <input type="radio" name="linkus-view" id="linkus-view-unrelated" class="view-toggle">
      <input type="radio" name="linkus-view" id="linkus-view-message" class="view-toggle">

      <aside id="linkus-related" class="view">
        <template id="link-related-template">
          <details class="link-details" data-direction>
            <summary>
              <h3 data-name></h3>
              <p data-description></p>
              <div class="link-actions">
                <button class="edit-link-button">Edit Link</button>
                <button class="delete-link-button">Delete Link</button>
              </div>
            </summary>
            <div class="linked-node-description">
              <button class="goto-node-button">Go to Node</button>
              <p data-node-description></p>
            </div>
          </details>
        </template>
        <!-- Content for links related to the current node -->
      </aside>

      <aside id="linkus-unrelated" class="view">
        <template id="link-card-template">
          <div class="link-card outgoing">
            <h3 data-names></h3>
            <div class="link-card-content">
              <p data-description></p>
              <button class="goto-link-button" data-from-id data-to-id>Go to Link</button>
            </div>
          </div>
        </template>
        <!-- Content for a list of all links -->
      </aside>

      <aside id="linkus-message" class="view">
        <p>No links to show.</p>
      </aside>
    </section>
  </main>

  <div id="dialogus">
    <!-- Dialogs will be placed here -->
    <dialog id="new-node-dialog">
      <form method="dialog">
        <h2>New Node</h2>
        <label>
          Name
          <input type="text" name="name" list="nodes-datalist" required placeholder="Unique node name">
        </label>
        <label>
          Description
          <textarea name="description" placeholder="Optional details about the node..."></textarea>
        </label>
        <footer>
          <button type="reset" value="cancel" class="close">Cancel</button>
          <button type="submit" value="add">Add</button>
        </footer>
      </form>
    </dialog>

    <dialog id="inform-dialog">
      <form method="dialog">
        <h2 data-title></h2>
        <p data-text></p>
        <footer>
          <button value="ok" class="close">OK</button>
        </footer>
      </form>
    </dialog>

    <dialog id="new-link-dialog">
      <form method="dialog">
        <h2>New Link</h2>
        <div class="link-fields">
          <label>
            From
            <input type="text" name="from" list="nodes-datalist" required placeholder="Name of existing node">
          </label>
          <button type="button" class="swap-button" title="Swap Directions">â‡…</button>
          <label>
            To
            <input type="text" name="to" list="nodes-datalist" required placeholder="Name of existing node">
          </label>
        </div>
        <label>
          Description
          <textarea name="description" placeholder="Optional details about the relationship..."></textarea>
        </label>
        <footer>
          <button type="reset" value="cancel" class="close">Cancel</button>
          <button type="submit" value="add">Add</button>
        </footer>
      </form>
    </dialog>

    <dialog id="delete-node-dialog">
      <form method="dialog">
        <h2>Delete Node</h2>
        <p>
          Are you sure you want to permanently delete the node
          "<strong><output name="name"></output></strong>"?
          This will also delete <strong><output name="linkCount"></output></strong>
          link(s) connected to it. This action cannot be undone.
        </p>
        <footer>
          <button type="reset" value="cancel" class="close">Cancel</button>
          <button type="submit" value="delete" class="destructive">Delete</button>
        </footer>
      </form>
    </dialog>

    <dialog id="delete-link-dialog">
      <form method="dialog">
        <h2>Delete Link</h2>
        <p>
          Are you sure you want to permanently delete the link from
          "<strong><output name="fromName"></output></strong>" to
          "<strong><output name="toName"></output></strong>"?
          This action cannot be undone.
        </p>
        <footer>
          <button type="reset" value="cancel" class="close">Cancel</button>
          <button type="submit" value="delete" class="destructive">Delete</button>
        </footer>
      </form>
    </dialog>

    <dialog id="menu-dialog">
      <!-- Menu Dialog Content -->
    </dialog>

    <!-- Other dialogs ... -->
  </div>
</body>

</html>
