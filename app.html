<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GRAPH</title>
  <!-- <link rel="stylesheet" href="app.css"> -->
  <script type="module" src="app.js"></script>
</head>

<body !hidden>
  <header id="headus">
    <datalist id="names"></datalist>

    <div class="group">
      <button id="add-node">Add Node</button>
      <input type="search" id="query" list="names" placeholder="Find or create a node...">
    </div>

    <div class="group">
      <h1>GRAPH</h1>
      <img src="logo.svg" alt="graph app logo with letter nodes and arrows connecting them">
      <button id="open-menu">Menu</button>
    </div>
  </header>

  <main>
    <section id="nodus">
      <form action="javascript:">
        <input type="checkbox" name="current">

        <article id="current" class="view">
          <input type="hidden" name="id">

          <header>
            <button value="edit">Edit Node</button>
            <button value="delete">Delete Node</button>
            <button value="add">Add Link</button>
          </header>

          <h2 class="name">
            <output name="name">node.name</output>
          </h2>

          <p class="description">
            <output name="description">node.description</output>
          </p>

          <ul class="view" id="linked">
            <template>
              <li class="node.direction">
                <label class="button">
                  <input type="radio" name="selected" value="node.id">
                  <output>node.name</output>
                </label>
                <button value="goto" data-id="node.id">node.name</button>
              </li>
            </template>
          </ul>
          <p class="view" id="unlinked">No links to other nodes yet.</p>
        </article>

        <article id="many" class="view">
          <ul id="nodes" class="nodes view">
            <template>
              <li class="node">
                <header>
                  <button value="goto" data-id="node.id">Go to Node</button>
                  <div class="group">
                    <output class="incoming" title="Incoming Links"></output>
                    <output class="outgoing" title="Outgoing Links"></output>
                  </div>
                </header>

                <h3 class="name"></h3>
                <p class="description"></p>
              </li>
            </template>
          </ul>
          <p class="view">No nodes in the graph. Add some using the 'Add Node' button in the top left corner.</p>
        </article>
      </form>
    </section>

    <div id="splitter"></div>

    <section id="linkus">
      <input type="checkbox" name="related">

      <aside id="related" class="view">
        <ul class="links view">
          <template>
            <li class="link">
              <details>
                <summary>
                  <header>
                    <button value="edit">Edit Link</button>
                    <button class="delete">Delete Link</button>
                  </header>

                  <h3 class="name">node.name</h3>
                  <p class="desecription">node.description</p>
                </summary>

                <button value="goto" data-id="node.id">Go to Node</button>
                <p class="description"></p>
              </details>
            </li>
          </template>
        </ul>
        <p class="view">No links with the current node yet. Add some using the 'Add Link' button on the left.</p>
      </aside>

      <aside id="unrelated" class="view">
        <ul class="links view">
          <template>
            <li class="link">
              <header>
                <button value="goto" data-id="link.id">Go to Link</button>
              </header>

              <h3 class="names">
                <output class="from">node.name</output>
                <output class="to">node.name</output>
              </h3>

              <p class="description"></p>
            </li>
          </template>
        </ul>
        <p class="view">No links in the graph yet.</p>
      </aside>
    </section>
  </main>

  <div id="dialogus">
    <dialog id="new-node">
      <form method="dialog">
        <h2>New Node</h2>

        <label class="field">
          <div>Name</div>
          <input type="search" name="name" list="names" placeholder="Unique node name" required>
        </label>

        <label class="field">
          <div>Description</div>
          <textarea name="description" placeholder="Optional node description..."></textarea>
        </label>

        <footer>
          <button value="add">Add</button>
          <button type="reset" value="close">Cancel</button>
        </footer>
      </form>
    </dialog>

    <dialog id="inform">
      <form method="dialog">
        <h2 data-title></h2>
        <p data-text></p>
        <footer>
          <button value="ok" class="close">OK</button>
        </footer>
      </form>
    </dialog>

    <dialog id="new-link">
      <form method="dialog">
        <h2>New Link</h2>
        <div class="link-fields">
          <label>
            From
            <input type="text" name="from" list="nodes-datalist" required placeholder="Name of existing node">
          </label>
          <button type="button" class="swap-button" title="Swap Directions">â‡…</button>
          <label>
            To
            <input type="text" name="to" list="nodes-datalist" required placeholder="Name of existing node">
          </label>
        </div>
        <label>
          Description
          <textarea name="description" placeholder="Optional details about the relationship..."></textarea>
        </label>
        <footer>
          <button type="reset" value="cancel" class="close">Cancel</button>
          <button type="submit" value="add">Add</button>
        </footer>
      </form>
    </dialog>

    <dialog id="delete-node">
      <form method="dialog">
        <h2>Delete Node</h2>
        <p>
          Are you sure you want to permanently delete the node
          "<strong><output name="name"></output></strong>"?
          This will also delete <strong><output name="linkCount"></output></strong>
          link(s) connected to it. This action cannot be undone.
        </p>
        <footer>
          <button type="reset" value="cancel" class="close">Cancel</button>
          <button type="submit" value="delete" class="destructive">Delete</button>
        </footer>
      </form>
    </dialog>

    <dialog id="delete-link">
      <form method="dialog">
        <h2>Delete Link</h2>
        <p>
          Are you sure you want to permanently delete the link from
          "<strong><output name="fromName"></output></strong>" to
          "<strong><output name="toName"></output></strong>"?
          This action cannot be undone.
        </p>
        <footer>
          <button type="reset" value="cancel" class="close">Cancel</button>
          <button type="submit" value="delete" class="destructive">Delete</button>
        </footer>
      </form>
    </dialog>

    <dialog id="menu">
      <!-- Menu Dialog Content -->
    </dialog>

    <!-- Other dialogs ... -->
  </div>
</body>

</html>
